# aMQTT Broker/Client + MySQL

- [aMQTT Broker/Client + MySQL](#amqtt-brokerclient--mysql)
  - [å®‰è£…ä¾èµ–](#å®‰è£…ä¾èµ–)
  - [æ„å»ºé¡¹ç›®](#æ„å»ºé¡¹ç›®)
    - [åˆå§‹åŒ–æ•°æ®åº“](#åˆå§‹åŒ–æ•°æ®åº“)
    - [è¿è¡ŒæœåŠ¡ç«¯](#è¿è¡ŒæœåŠ¡ç«¯)
    - [è¿è¡Œå®¢æˆ·ç«¯](#è¿è¡Œå®¢æˆ·ç«¯)
  - [å¦‚ä½•ç”Ÿæˆå¯†ç ](#å¦‚ä½•ç”Ÿæˆå¯†ç )

ç‰¹å¾ï¼š
- ğŸš€ï¼šå…¨éƒ¨å¼‚æ­¥æ“ä½œï¼ŒåŒ…æ‹¬ç½‘ç»œ I/O å’Œæ•°æ®åº“æ“ä½œ
- ğŸ§²ï¼š`uvloop` æ¥è¿‘ç³»ç»Ÿçº§åˆ«çš„äº‹ä»¶å¾ªç¯ï¼Œæ¯” Node.js å¿«ä¸¤å€
- ğŸ’ï¼šYAML é…åˆ Python è„šæœ¬è¿›è¡Œå¯æ‰©å±•é…ç½®
- ğŸ¡ï¼šé›¶è€¦åˆï¼Œæç®€é…ç½®ï¼Œå¯ä»¥æ›¿æ¢ä¸ºä½ éœ€è¦çš„ä¸œè¥¿

## å®‰è£…ä¾èµ–

è¦æ±‚ Python >= 3.9ã€‚

```bash
pip install -r requirements.txt
```

## æ„å»ºé¡¹ç›®

### åˆå§‹åŒ–æ•°æ®åº“

åœ¨ MySQL ä¸­æ‰§è¡Œ `resources/mysql-init.sql` å³å¯ã€‚

### è¿è¡ŒæœåŠ¡ç«¯

```bash
cd broker
python broker.py
```

### è¿è¡Œå®¢æˆ·ç«¯

```bash
cd client
python client.py
```

## å¦‚ä½•ç”Ÿæˆå¯†ç 

å¦‚æœå·²ç»å®‰è£…äº† `mosquitto`ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆå¯†ç æ–‡ä»¶

```bash
mosquitto_passwd passwd_file username
```

åœ¨ `broker/makepwd/` æ–‡ä»¶å¤¹ä¸‹ä¹Ÿæä¾›äº†ä¸€ä¸ªå¯†ç ç”Ÿæˆå™¨ï¼š

```bash
python makepwd.py username password
```
